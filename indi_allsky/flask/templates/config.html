{% extends 'base.html' %}

{% block title %}indi-allsky: Config{% endblock %}

{% block head %}
<style>
</style>
{% endblock %}

{% block content %}
<form id="form_config" onSubmit="return false;">
    {{ form_config.csrf_token }}
    <div class="text-danger my-2" id="csrf_token-error"></div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.SQLALCHEMY_DATABASE_URI.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.SQLALCHEMY_DATABASE_URI(class='form-control bg-secondary') }}
            <div id="SQLALCHEMY_DATABASE_URI-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">READ ONLY - Must be manually configured in config.json</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CAMERA_INTERFACE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CAMERA_INTERFACE(class='form-control bg-secondary') }}
            <div id="CAMERA_INTERFACE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8"></div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.INDI_SERVER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.INDI_SERVER(class='form-control bg-secondary') }}
            <div id="INDI_SERVER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">INDI server hostname (default: localhost)</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.INDI_PORT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.INDI_PORT(class='form-control bg-secondary') }}
            <div id="INDI_PORT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">INDI port (default: 7624)</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__NIGHT__GAIN.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__NIGHT__GAIN(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__NIGHT__GAIN-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Camera dependent</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__NIGHT__BINNING.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__NIGHT__BINNING(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__NIGHT__BINNING-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Min 1, Max 4 - Camera dependent</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__MOONMODE__GAIN.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__MOONMODE__GAIN(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__MOONMODE__GAIN-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Camera dependent</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__MOONMODE__BINNING.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__MOONMODE__BINNING(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__MOONMODE__BINNING-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Min 1, Max 4 - Camera dependent</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__DAY__GAIN.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__DAY__GAIN(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__DAY__GAIN-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Camera dependent</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__DAY__BINNING.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_CONFIG__DAY__BINNING(class='form-control bg-secondary') }}
            <div id="CCD_CONFIG__DAY__BINNING-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Min 1, Max 4 - Camera dependent</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_MAX.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_MAX(class='form-control bg-secondary') }}
            <div id="CCD_EXPOSURE_MAX-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Default: 15, Min 1, Max 60</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_DEF.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_DEF(class='form-control bg-secondary') }}
            <div id="CCD_EXPOSURE_DEF-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">0 = auto</div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_MIN.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_EXPOSURE_MIN(class='form-control bg-secondary') }}
            <div id="CCD_EXPOSURE_MIN-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">0 = auto</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.EXPOSURE_PERIOD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.EXPOSURE_PERIOD(class='form-control bg-secondary') }}
            <div id="EXPOSURE_PERIOD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">
            <div>Seconds between start of each frame (Night)</div>
            <div>Setting this below the maximum exposure will cause each new frame to begin immediately after the last ends</div>
            <div>It is not recommended to set this below 5.0</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.EXPOSURE_PERIOD_DAY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.EXPOSURE_PERIOD_DAY(class='form-control bg-secondary') }}
            <div id="EXPOSURE_PERIOD_DAY-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">
            <div>Seconds between start of each frame (Day)</div>
            <div>It is not recommended to set this below 5.0</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FOCUS_MODE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FOCUS_MODE(class='form-check-input') }}
                <div id="FOCUS_MODE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Focus mode removes any pause between exposures so they are taken as quickly as possible</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FOCUS_DELAY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FOCUS_DELAY(class='form-control bg-secondary') }}
            <div id="FOCUS_DELAY-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">
            <div>Seconds between each frame during focusing. This value should be slightly higher than the download time of images for your camera.</div>
            <div>RasPi HQ camera is about 3.5 seconds, therefore 4.0 should be sufficient.</div>
            <div>Astronomy cameras may be able to go as low as 1.0 or 2.0</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.SCNR_ALGORITHM.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.SCNR_ALGORITHM(class='form-control bg-secondary') }}
            <div id="SCNR_ALGORITHM-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">
            <div>SCNR algorithm to apply to reduce green bias in image</div>
            <div>
              <ul>
                <li>Average Neutral - Good colors, but can cause a magenta bias (especially during the day)</li>
                <li>Maximum Neutral - Use this if you enable day time caputures</li>
              </ul>
            </div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.WBR_FACTOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.WBR_FACTOR(class='form-control bg-secondary') }}
            <div id="WBR_FACTOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8"></div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.WBG_FACTOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.WBG_FACTOR(class='form-control bg-secondary') }}
            <div id="WBG_FACTOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8"></div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.WBB_FACTOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.WBB_FACTOR(class='form-control bg-secondary') }}
            <div id="WBB_FACTOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8"></div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.AUTO_WB.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.AUTO_WB(class='form-check-input') }}
                <div id="AUTO_WB-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Auto WB is applied after manual WB settings</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_COOLING.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.CCD_COOLING(class='form-check-input') }}
                <div id="CCD_COOLING-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Activate CCD Cooling (requires hardware support)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_TEMP.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.CCD_TEMP(class='form-control bg-secondary') }}
            <div id="CCD_TEMP-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Temperature target</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEMP_DISPLAY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEMP_DISPLAY(class='form-control bg-secondary') }}
            <div id="TEMP_DISPLAY-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Temperature system for display</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.CCD_TEMP_SCRIPT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.CCD_TEMP_SCRIPT(class='form-control bg-secondary') }}
            <div id="CCD_TEMP_SCRIPT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">
            <div>External script used for CCD temperature.  Used when a camera does not support temperature measurements.</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.GPS_TIMESYNC.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.GPS_TIMESYNC(class='form-check-input') }}
                <div id="GPS_TIMESYNC-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">
            <div>Sync system time from GPS.  Requires GPS hardware and GPSd installation.</div>
            <div><span class="badge rounded-pill bg-warning text-dark">Warning</span> NTP time sync will be disabled</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU(class='form-control bg-secondary') }}
            <div id="TARGET_ADU-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Target Image Brightness</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU_DEV.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU_DEV(class='form-control bg-secondary') }}
            <div id="TARGET_ADU_DEV-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Allowed Brightness deviation</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU_DEV_DAY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TARGET_ADU_DEV_DAY(class='form-control bg-secondary') }}
            <div id="TARGET_ADU_DEV_DAY -error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Allowed Brightness deviation.  Setting this value too low can cause exposure flapping.</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2 col-form-label">
            ADU Region of Interest
        </div>
        <div class="col-sm-2">
            {{ form_config.ADU_ROI_X1(class='form-control bg-secondary') }}
            <div id="ADU_ROI_X1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>

        <div class="col-sm-2">
            {{ form_config.ADU_ROI_Y1(class='form-control bg-secondary') }}
            <div id="ADU_ROI_Y1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">
            <div>x1, y1</div>
            <div>* Not used if Detection Mask is defined *</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2 col-form-label"></div>
        <div class="col-sm-2">
            {{ form_config.ADU_ROI_X2(class='form-control bg-secondary') }}
            <div id="ADU_ROI_X2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>

        <div class="col-sm-2">
            {{ form_config.ADU_ROI_Y2(class='form-control bg-secondary') }}
            <div id="ADU_ROI_Y2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">x2, y2</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DETECT_STARS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DETECT_STARS(class='form-check-input') }}
                <div id="DETECT_STARS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">
            <div>SQM Region of Interest used for detection area unless Detection Mask is defined</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DETECT_STARS_THOLD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.DETECT_STARS_THOLD(class='form-control bg-secondary') }}
            <div id="DETECT_STARS_THOLD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">0.6 is a good value for color images, 0.55 for mono</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DETECT_METEORS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DETECT_METEORS(class='form-check-input') }}
                <div id="DETECT_METEORS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">
            <div>SQM Region of Interest used for detection area unless Detection Mask is defined</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DETECT_MASK.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.DETECT_MASK(class='form-control bg-secondary') }}
            <div id="DETECT_MASK-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">
            <div>Image mask file for detection area.  Must be a PNG</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DETECT_DRAW.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DETECT_DRAW(class='form-check-input') }}
                <div id="DETECT_DRAW-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Mark detections on image for calibration</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2 col-form-label">
            SQM/Star Region of Interest
        </div>
        <div class="col-sm-2">
            {{ form_config.SQM_ROI_X1(class='form-control bg-secondary') }}
            <div id="SQM_ROI_X1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>

        <div class="col-sm-2">
            {{ form_config.SQM_ROI_Y1(class='form-control bg-secondary') }}
            <div id="SQM_ROI_Y1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">
            <div>x1, y1</div>
            <div>* Not used if Detection Mask is defined *</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2 col-form-label"></div>
        <div class="col-sm-2">
            {{ form_config.SQM_ROI_X2(class='form-control bg-secondary') }}
            <div id="SQM_ROI_X2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>

        <div class="col-sm-2">
            {{ form_config.SQM_ROI_Y2(class='form-control bg-secondary') }}
            <div id="SQM_ROI_Y2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">x2, y2</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.LOCATION_LATITUDE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.LOCATION_LATITUDE(class='form-control bg-secondary') }}
            <div id="LOCATION_LATITUDE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Min: -90, Max: 90</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.LOCATION_LONGITUDE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.LOCATION_LONGITUDE(class='form-control bg-secondary') }}
            <div id="LOCATION_LONGITUDE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Min: -180, Max: 180</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TIMELAPSE_ENABLE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.TIMELAPSE_ENABLE(class='form-check-input') }}
                <div id="TIMELAPSE_ENABLE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable timelapse, keogram, and star trail creation</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DAYTIME_CAPTURE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DAYTIME_CAPTURE(class='form-check-input') }}
                <div id="DAYTIME_CAPTURE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable daytime image capture</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DAYTIME_TIMELAPSE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DAYTIME_TIMELAPSE(class='form-check-input') }}
                <div id="DAYTIME_TIMELAPSE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable daytime timelapse generation</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DAYTIME_CONTRAST_ENHANCE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DAYTIME_CONTRAST_ENHANCE(class='form-check-input') }}
                <div id="DAYTIME_CONTRAST_ENHANCE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Apply CLAHE contrast enhancement</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_CONTRAST_ENHANCE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.NIGHT_CONTRAST_ENHANCE(class='form-check-input') }}
                <div id="NIGHT_CONTRAST_ENHANCE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Apply CLAHE contrast enhancement</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DAYTIME_AUTO_STRETCH.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DAYTIME_AUTO_STRETCH(class='form-check-input') }}
                <div id="DAYTIME_AUTO_STRETCH-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Apply automatic histogram stretch</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_AUTO_STRETCH.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.NIGHT_AUTO_STRETCH(class='form-check-input') }}
                <div id="NIGHT_AUTO_STRETCH-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Apply automatic histogram stretch</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.AUTO_STRETCH_SHADOWS_CLIP.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.AUTO_STRETCH_SHADOWS_CLIP(class='form-control bg-secondary') }}
            <div id="AUTO_STRETCH_SHADOWS_CLIP-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Shadows clipping point for automatic histogram stretching</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.AUTO_STRETCH_TARGET_BKG.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.AUTO_STRETCH_TARGET_BKG(class='form-control bg-secondary') }}
            <div id="AUTO_STRETCH_TARGET_BKG-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Target background for automatic histogram stretching</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_SUN_ALT_DEG.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.NIGHT_SUN_ALT_DEG(class='form-control bg-secondary') }}
            <div id="NIGHT_SUN_ALT_DEG-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Sun altitude for start of night</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_MOONMODE_ALT_DEG.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.NIGHT_MOONMODE_ALT_DEG(class='form-control bg-secondary') }}
            <div id="NIGHT_MOONMODE_ALT_DEG-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Moon altitude to enable Moon Mode (91 will disable)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_MOONMODE_PHASE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.NIGHT_MOONMODE_PHASE(class='form-control bg-secondary') }}
            <div id="NIGHT_MOONMODE_PHASE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Moon illumnation percentage to enable Moon Mode</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.WEB_EXTRA_TEXT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.WEB_EXTRA_TEXT(class='form-control bg-secondary') }}
            <div id="WEB_EXTRA_TEXT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">File containing extra text to be included in info box</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_ANGLE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_ANGLE(class='form-control bg-secondary') }}
            <div id="KEOGRAM_ANGLE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">
            <div>Min: -180, Max: 180 - Image rotate for Keogram data</div>
            <div><a href="https://github.com/aaronwmorris/indi-allsky/wiki/Keogram-Rotation" target="_blank">Keogram Wiki</a></div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_H_SCALE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_H_SCALE(class='form-control bg-secondary') }}
            <div id="KEOGRAM_H_SCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Keogram horizontal scale factor</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_V_SCALE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_V_SCALE(class='form-control bg-secondary') }}
            <div id="KEOGRAM_V_SCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Keogram vertical scale factor</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.KEOGRAM_LABEL.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.KEOGRAM_LABEL(class='form-check-input') }}
                <div id="KEOGRAM_LABEL-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Add keogram time labels</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_MAX_ADU.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_MAX_ADU(class='form-control bg-secondary') }}
            <div id="STARTRAILS_MAX_ADU-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Max average image brightness to include in star trails</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_MASK_THOLD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_MASK_THOLD(class='form-control bg-secondary') }}
            <div id="STARTRAILS_MASK_THOLD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Mask threshold for image brightness exclusion</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_PIXEL_THOLD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_PIXEL_THOLD(class='form-control bg-secondary') }}
            <div id="STARTRAILS_PIXEL_THOLD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Pixel threshold for mask threshold</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_TIMELAPSE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.STARTRAILS_TIMELAPSE(class='form-check-input') }}
                <div id="STARTRAILS_TIMELAPSE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Generate star trails timelapse</div>
    </div>


    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_TIMELAPSE_MINFRAMES.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.STARTRAILS_TIMELAPSE_MINFRAMES(class='form-control bg-secondary') }}
            <div id="STARTRAILS_TIMELAPSE_MINFRAMES-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Minimum frames for star trails timelapse.  250 frames = 10s @ 25fps</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_TYPE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_TYPE(class='form-control bg-secondary') }}
            <div id="IMAGE_FILE_TYPE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">File type for timelapse images.  Restart gunicorn if you change this setting.<br /><span class="badge rounded-pill bg-warning text-dark">Warning</span><b>Some browsers do *NOT* support TIFF files.</b></div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__JPG.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__JPG(class='form-control bg-secondary') }}
            <div id="IMAGE_FILE_COMPRESSION__JPG-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">[1-100] Compression factor for JPEG images.  Higher numbers increase quality and file sizes.  Default: 90</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__PNG.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__PNG(class='form-control bg-secondary') }}
            <div id="IMAGE_FILE_COMPRESSION__PNG-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">[1-9] Compression factor for PNG images. Higher numbers increase file sizes.  Default: 5</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__TIF.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_FILE_COMPRESSION__TIF(class='form-control bg-secondary') }}
            <div id="IMAGE_FILE_COMPRESSION__TIF-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">[int] Compression flag for TIFF images. 5 = LZW - See libtiff.h for valid options</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.IMAGE_FOLDER(class='form-control bg-secondary') }}
            <div id="IMAGE_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">
            <div>Directory to store timelapse images</div>
            <div>Default: /var/www/html/allsky/images</div>
            <div>If you change this setting, please re-run setup.sh to update the web server config</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_LABEL.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.IMAGE_LABEL(class='form-check-input') }}
                <div id="IMAGE_LABEL-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Add image time labels</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_LABEL_TEMPLATE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.IMAGE_LABEL_TEMPLATE(class='form-control bg-secondary', rows='8') }}
            <div id="IMAGE_LABEL_TEMPLATE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">
            <div><a href="https://docs.python.org/3/library/string.html#formatspec" target="_blank">Python format syntax</a></div>
            <div><a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes" target="_blank">Python datetime format codes</a></div>
            <div>Available variables: <pre>timestamp, ts, exposure, gain, temp, temp_unit, sqm, stars, detections</pre></div>
            <div><a href="https://github.com/aaronwmorris/indi-allsky/wiki/Image-Labels" target="_blank">Image Labels Wiki</a></div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXTRA_TEXT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.IMAGE_EXTRA_TEXT(class='form-control bg-secondary') }}
            <div id="IMAGE_EXTRA_TEXT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">
            <div>File containing extra text for image</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_ROTATE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.IMAGE_ROTATE(class='form-control bg-secondary') }}
            <div id="IMAGE_ROTATE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">
            <div>Image rotation options</div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FLIP_V.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.IMAGE_FLIP_V(class='form-check-input') }}
                <div id="IMAGE_FLIP_V-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Flip timelapse images vertically</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_FLIP_H.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.IMAGE_FLIP_H(class='form-check-input') }}
                <div id="IMAGE_FLIP_H-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Flip timelapse images horizontally</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_SCALE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_SCALE(class='form-control bg-secondary') }}
            <div id="IMAGE_SCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Scale factor for timelapse images</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2 col-form-label">
            Image Crop
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_CROP_ROI_X1(class='form-control bg-secondary') }}
            <div id="IMAGE_CROP_ROI_X1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_CROP_ROI_Y1(class='form-control bg-secondary') }}
            <div id="IMAGE_CROP_ROI_Y1-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">x1, y1</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2 col-form-label">
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_CROP_ROI_X2(class='form-control bg-secondary') }}
            <div id="IMAGE_CROP_ROI_X2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_CROP_ROI_Y2(class='form-control bg-secondary') }}
            <div id="IMAGE_CROP_ROI_Y2-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">x2, y2</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.NIGHT_GRAYSCALE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.NIGHT_GRAYSCALE(class='form-check-input') }}
                <div id="NIGHT_GRAYSCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Save images in grayscale at night</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.DAYTIME_GRAYSCALE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.DAYTIME_GRAYSCALE(class='form-check-input') }}
                <div id="DAYTIME_GRAYSCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Save images in grayscale during day time</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_SAVE_FITS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.IMAGE_SAVE_FITS(class='form-check-input') }}
                <div id="IMAGE_SAVE_FITS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable saving raw FITS data</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXPORT_RAW.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXPORT_RAW(class='form-control bg-secondary') }}
            <div id="IMAGE_EXPORT_RAW-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Enable saving raw images</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXPORT_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.IMAGE_EXPORT_FOLDER(class='form-control bg-secondary') }}
            <div id="IMAGE_EXPORT_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">Folder to save raw TIF images</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXPIRE_DAYS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.IMAGE_EXPIRE_DAYS(class='form-control bg-secondary') }}
            <div id="IMAGE_EXPIRE_DAYS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Maximum age of original image files before deletion</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TIMELAPSE_EXPIRE_DAYS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TIMELAPSE_EXPIRE_DAYS(class='form-control bg-secondary') }}
            <div id="TIMELAPSE_EXPIRE_DAYS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Maximum age of timelapse, keogram, and star trails before deletion</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FFMPEG_FRAMERATE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FFMPEG_FRAMERATE(class='form-control bg-secondary') }}
            <div id="FFMPEG_FRAMERATE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">ffmpeg framerate for timelapse videos</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FFMPEG_BITRATE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FFMPEG_BITRATE(class='form-control bg-secondary') }}
            <div id="FFMPEG_BITRATE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">ffmpeg bitrate</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FFMPEG_VFSCALE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FFMPEG_VFSCALE(class='form-control bg-secondary') }}
            <div id="FFMPEG_VFSCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">ffmpeg scaling (only necessary on buster)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FFMPEG_CODEC.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FFMPEG_CODEC(class='form-control bg-secondary') }}
            <div id="FFMPEG_CODEC-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">ffmpeg output codec</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_FACE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.TEXT_PROPERTIES__FONT_FACE(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_FACE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Font face for image metadata</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_HEIGHT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_HEIGHT(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_HEIGHT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Font height for row spacing</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_X.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_X(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_X-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">X coordinate to start writing metadata</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_Y.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_Y(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_Y-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Y coordinate to start writing metadata</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_COLOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_COLOR(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_COLOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Font color in R,G,B</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_SCALE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_SCALE(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_SCALE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Font size</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_THICKNESS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_THICKNESS(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__FONT_THICKNESS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Font thickness</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__FONT_OUTLINE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.TEXT_PROPERTIES__FONT_OUTLINE(class='form-check-input') }}
                <div id="TEXT_PROPERTIES__FONT_OUTLINE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Add black outline to text</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.TEXT_PROPERTIES__DATE_FORMAT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.TEXT_PROPERTIES__DATE_FORMAT(class='form-control bg-secondary') }}
            <div id="TEXT_PROPERTIES__DATE_FORMAT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-4">
            <div>(read-only) No longer used, see Label Template above</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__MODE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__MODE(class='form-control bg-secondary') }}
            <div id="ORB_PROPERTIES__MODE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Orb display mode</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__RADIUS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__RADIUS(class='form-control bg-secondary') }}
            <div id="ORB_PROPERTIES__RADIUS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Radius of Sun and Moon orbs on edge of image</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__SUN_COLOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__SUN_COLOR(class='form-control bg-secondary') }}
            <div id="ORB_PROPERTIES__SUN_COLOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Color of Sun Orb</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__MOON_COLOR.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.ORB_PROPERTIES__MOON_COLOR(class='form-control bg-secondary') }}
            <div id="ORB_PROPERTIES__MOON_COLOR-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Color of Moon Orb</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__CLASSNAME.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__CLASSNAME(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__CLASSNAME-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">
            <div>File transfer protocol</div>
            <div><a href="https://github.com/aaronwmorris/indi-allsky/wiki/File-transfers" target="_blank">File Transfer Wiki</a></div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__HOST.label(class='col-form-label') }}
        </div>
            <div class="col-sm-4">
            {{ form_config.FILETRANSFER__HOST(class='form-control bg-secondary') }}
        <div id="FILETRANSFER__HOST-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Hostname for file transfer</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__PORT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__PORT(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__PORT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">File transfer port (0 for protocol default)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__USERNAME.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.FILETRANSFER__USERNAME(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__USERNAME-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">Username for file transfer</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__PASSWORD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.FILETRANSFER__PASSWORD(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__PASSWORD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">Password for file transfer</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__PRIVATE_KEY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__PRIVATE_KEY(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__PRIVATE_KEY-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Private key for file transfer (SSH)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__PUBLIC_KEY.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__PUBLIC_KEY(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__PUBLIC_KEY-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Public key for file transfer (SSH)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__TIMEOUT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__TIMEOUT(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__TIMEOUT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">File transfer timeout</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__CERT_BYPASS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__CERT_BYPASS(class='form-check-input') }}
                <div id="FILETRANSFER__CERT_BYPASS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Bypass certificate validation</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__LIBCURL_OPTIONS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-6">
            {{ form_config.FILETRANSFER__LIBCURL_OPTIONS(class='form-control bg-secondary', rows='6') }}
            <div id="FILETRANSFER__LIBCURL_OPTIONS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-4">
            <div>libcurl options for use with PycURL classes</div>
            <div><span class="badge rounded-pill bg-warning text-dark">Warning</span> Options are not fully validated</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_IMAGE_NAME.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.FILETRANSFER__REMOTE_IMAGE_NAME(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_IMAGE_NAME-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">
            <div>Remote image name. "{0}" is replaced with the configured image type extension.</div>
            <div>Available variables: <pre>timestamp, ts, ext</pre></div>
            <div><a href="https://docs.python.org/3/library/string.html#formatspec" target="_blank">Python format syntax</a></div>
            <div><a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes" target="_blank">Python datetime format codes</a></div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_IMAGE_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_IMAGE_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_IMAGE_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">
            <div>Remote folder to store images</div>
            <div>Available variables: <pre>timestamp, ts</pre></div>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_METADATA_NAME.label(class='col-form-label') }}
        </div>
        <div class="col-sm-3">
            {{ form_config.FILETRANSFER__REMOTE_METADATA_NAME(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_METADATA_NAME-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-7">Remote metadata file name.</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_METADATA_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_METADATA_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_METADATA_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Remote folder to store metadata</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_VIDEO_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_VIDEO_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_VIDEO_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Remote folder to store timelapse videos</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_KEOGRAM_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_KEOGRAM_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_KEOGRAM_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Remote folder to store keograms</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_STARTRAIL_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_STARTRAIL_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_STARTRAIL_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Remote folder to store star trails</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__REMOTE_ENDOFNIGHT_FOLDER.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.FILETRANSFER__REMOTE_ENDOFNIGHT_FOLDER(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__REMOTE_ENDOFNIGHT_FOLDER-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">Remote folder to store Allsky EndOfNight data</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_IMAGE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_IMAGE(class='form-control bg-secondary') }}
            <div id="FILETRANSFER__UPLOAD_IMAGE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">Enable image uploads (0 = disable, 1 = every image, 2 = every 2nd image, etc)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_METADATA.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__UPLOAD_METADATA(class='form-check-input') }}
                <div id="FILETRANSFER__UPLOAD_METADATA-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable metadata uploads (requires image uploads to be enabled)</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_VIDEO.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__UPLOAD_VIDEO(class='form-check-input') }}
                <div id="FILETRANSFER__UPLOAD_VIDEO-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable timelapse video uploads</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_KEOGRAM.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__UPLOAD_KEOGRAM(class='form-check-input') }}
                <div id="FILETRANSFER__UPLOAD_KEOGRAM-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable keogram uploads</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_STARTRAIL.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__UPLOAD_STARTRAIL(class='form-check-input') }}
                <div id="FILETRANSFER__UPLOAD_STARTRAIL-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable star trail uploads</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.FILETRANSFER__UPLOAD_ENDOFNIGHT.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.FILETRANSFER__UPLOAD_ENDOFNIGHT(class='form-check-input') }}
                <div id="FILETRANSFER__UPLOAD_ENDOFNIGHT-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable Allsky EndOfNight uploads</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__ENABLE.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.MQTTPUBLISH__ENABLE(class='form-check-input') }}
                <div id="MQTTPUBLISH__ENABLE-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Enable MQTT Publishing</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__HOST.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__HOST(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__HOST-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT hostname</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__TRANSPORT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__TRANSPORT(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__TRANSPORT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT Transport</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__PORT.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__PORT(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__PORT-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT port - 8883 = TLS, 1883 = standard</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__USERNAME.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__USERNAME(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__USERNAME-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT Username</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__PASSWORD.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__PASSWORD(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__PASSWORD-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT Password</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__BASE_TOPIC.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__BASE_TOPIC(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__BASE_TOPIC-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT Base Topic</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__QOS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-4">
            {{ form_config.MQTTPUBLISH__QOS(class='form-control bg-secondary') }}
            <div id="MQTTPUBLISH__QOS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-6">MQTT QoS - 0 (default), 1, or 2</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__TLS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.MQTTPUBLISH__TLS(class='form-check-input') }}
                <div id="MQTTPUBLISH__TLS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Use TLS/SSL for MQTT connections</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.MQTTPUBLISH__CERT_BYPASS.label }}
        </div>
        <div class="col-sm-2">
            <div class="form-switch">
                {{ form_config.MQTTPUBLISH__CERT_BYPASS(class='form-check-input') }}
                <div id="MQTTPUBLISH__CERT_BYPASS-error" class="invalid-feedback text-danger" style="display: none;"></div>
            </div>
        </div>
        <div class="col-sm-8">Bypass certificate validation</div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.LIBCAMERA__IMAGE_FILE_TYPE.label(class='col-form-label') }}
        </div>
        <div class="col-sm-2">
            {{ form_config.LIBCAMERA__IMAGE_FILE_TYPE(class='form-control bg-secondary') }}
            <div id="LIBCAMERA__IMAGE_FILE_TYPE-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-8">File type for libcamera acquistion.  This has no effect when using indi.</div>
    </div>

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.LIBCAMERA__EXTRA_OPTIONS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-5">
            {{ form_config.LIBCAMERA__EXTRA_OPTIONS(class='form-control bg-secondary') }}
            <div id="LIBCAMERA__EXTRA_OPTIONS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-5">
            <div>Extra options for libcamera-still.</div>
            <div><span class="badge rounded-pill bg-warning text-dark">Warning</span> Options are not validated</div>
        </div>
    </div>

    <hr />

    <div class="form-group row">
        <div class="col-sm-2">
            {{ form_config.INDI_CONFIG_DEFAULTS.label(class='col-form-label') }}
        </div>
        <div class="col-sm-6">
            {{ form_config.INDI_CONFIG_DEFAULTS(class='form-control bg-secondary', rows='10') }}
            <div id="INDI_CONFIG_DEFAULTS-error" class="invalid-feedback text-danger" style="display: none;"></div>
        </div>
        <div class="col-sm-4">
            <div><a href="https://github.com/aaronwmorris/indi-allsky/wiki/INDI-custom-config" target="_blank">INDI Config Wiki</a></div>
        </div>
    </div>

    <hr />

    <div id="success-message" class="text-success" style="display: none;"></div>
    <div id="failure-message" class="invalid-feedback text-danger" style="display: none;"></div>

    <button class="btn btn-primary">Save</button>
</form>

<script>
const successMessage = $('#success-message');
const failureMessage = $('#failure-message');
const field_names = [
    'csrf_token',
    'SQLALCHEMY_DATABASE_URI',
    'CAMERA_INTERFACE',
    'INDI_SERVER',
    'INDI_PORT',
    'CCD_CONFIG__NIGHT__GAIN',
    'CCD_CONFIG__NIGHT__BINNING',
    'CCD_CONFIG__MOONMODE__GAIN',
    'CCD_CONFIG__MOONMODE__BINNING',
    'CCD_CONFIG__DAY__GAIN',
    'CCD_CONFIG__DAY__BINNING',
    'CCD_EXPOSURE_MAX',
    'CCD_EXPOSURE_DEF',
    'CCD_EXPOSURE_MIN',
    'EXPOSURE_PERIOD',
    'EXPOSURE_PERIOD_DAY',
    'FOCUS_DELAY',
    'WBR_FACTOR',
    'WBG_FACTOR',
    'WBB_FACTOR',
    'SCNR_ALGORITHM',
    'CCD_TEMP',
    'TEMP_DISPLAY',
    'CCD_TEMP_SCRIPT',
    'TARGET_ADU',
    'TARGET_ADU_DEV',
    'TARGET_ADU_DEV_DAY',
    'ADU_ROI_X1',
    'ADU_ROI_Y1',
    'ADU_ROI_X2',
    'ADU_ROI_Y2',
    'SQM_ROI_X1',
    'SQM_ROI_Y1',
    'SQM_ROI_X2',
    'SQM_ROI_Y2',
    'DETECT_STARS_THOLD',
    'DETECT_MASK',
    'LOCATION_LATITUDE',
    'LOCATION_LONGITUDE',
    'AUTO_STRETCH_SHADOWS_CLIP',
    'AUTO_STRETCH_TARGET_BKG',
    'NIGHT_SUN_ALT_DEG',
    'NIGHT_MOONMODE_ALT_DEG',
    'NIGHT_MOONMODE_PHASE',
    'WEB_EXTRA_TEXT',
    'KEOGRAM_ANGLE',
    'KEOGRAM_H_SCALE',
    'KEOGRAM_V_SCALE',
    'STARTRAILS_MAX_ADU',
    'STARTRAILS_MASK_THOLD',
    'STARTRAILS_PIXEL_THOLD',
    'STARTRAILS_TIMELAPSE_MINFRAMES',
    'IMAGE_FILE_TYPE',
    'IMAGE_FILE_COMPRESSION__JPG',
    'IMAGE_FILE_COMPRESSION__PNG',
    'IMAGE_FILE_COMPRESSION__TIF',
    'IMAGE_FOLDER',
    'IMAGE_LABEL_TEMPLATE',
    'IMAGE_EXTRA_TEXT',
    'IMAGE_ROTATE',
    'IMAGE_SCALE',
    'IMAGE_CROP_ROI_X1',
    'IMAGE_CROP_ROI_Y1',
    'IMAGE_CROP_ROI_X2',
    'IMAGE_CROP_ROI_Y2',
    'IMAGE_EXPORT_RAW',
    'IMAGE_EXPORT_FOLDER',
    'IMAGE_EXPIRE_DAYS',
    'TIMELAPSE_EXPIRE_DAYS',
    'FFMPEG_FRAMERATE',
    'FFMPEG_BITRATE',
    'FFMPEG_VFSCALE',
    'FFMPEG_CODEC',
    'TEXT_PROPERTIES__FONT_FACE',
    'TEXT_PROPERTIES__FONT_HEIGHT',
    'TEXT_PROPERTIES__FONT_X',
    'TEXT_PROPERTIES__FONT_Y',
    'TEXT_PROPERTIES__FONT_COLOR',
    'TEXT_PROPERTIES__FONT_SCALE',
    'TEXT_PROPERTIES__FONT_THICKNESS',
    'TEXT_PROPERTIES__DATE_FORMAT',
    'ORB_PROPERTIES__MODE',
    'ORB_PROPERTIES__RADIUS',
    'ORB_PROPERTIES__SUN_COLOR',
    'ORB_PROPERTIES__MOON_COLOR',
    'FILETRANSFER__CLASSNAME',
    'FILETRANSFER__HOST',
    'FILETRANSFER__PORT',
    'FILETRANSFER__USERNAME',
    'FILETRANSFER__PASSWORD',
    'FILETRANSFER__PRIVATE_KEY',
    'FILETRANSFER__PUBLIC_KEY',
    'FILETRANSFER__TIMEOUT',
    'FILETRANSFER__REMOTE_IMAGE_NAME',
    'FILETRANSFER__REMOTE_IMAGE_FOLDER',
    'FILETRANSFER__REMOTE_METADATA_NAME',
    'FILETRANSFER__REMOTE_METADATA_FOLDER',
    'FILETRANSFER__REMOTE_VIDEO_FOLDER',
    'FILETRANSFER__REMOTE_KEOGRAM_FOLDER',
    'FILETRANSFER__REMOTE_STARTRAIL_FOLDER',
    'FILETRANSFER__REMOTE_ENDOFNIGHT_FOLDER',
    'FILETRANSFER__UPLOAD_IMAGE',
    'FILETRANSFER__LIBCURL_OPTIONS',
    'MQTTPUBLISH__TRANSPORT',
    'MQTTPUBLISH__HOST',
    'MQTTPUBLISH__PORT',
    'MQTTPUBLISH__USERNAME',
    'MQTTPUBLISH__PASSWORD',
    'MQTTPUBLISH__BASE_TOPIC',
    'MQTTPUBLISH__QOS',
    'LIBCAMERA__IMAGE_FILE_TYPE',
    'LIBCAMERA__EXTRA_OPTIONS',
    'INDI_CONFIG_DEFAULTS',
];

const checkbox_field_names = [
    'FOCUS_MODE',
    'AUTO_WB',
    'CCD_COOLING',
    'GPS_TIMESYNC',
    'DETECT_STARS',
    'DETECT_METEORS',
    'DETECT_DRAW',
    'TIMELAPSE_ENABLE',
    'DAYTIME_CAPTURE',
    'DAYTIME_TIMELAPSE',
    'DAYTIME_CONTRAST_ENHANCE',
    'NIGHT_CONTRAST_ENHANCE',
    'DAYTIME_AUTO_STRETCH',
    'NIGHT_AUTO_STRETCH',
    'KEOGRAM_LABEL',
    'STARTRAILS_TIMELAPSE',
    'IMAGE_LABEL',
    'IMAGE_FLIP_V',
    'IMAGE_FLIP_H',
    'IMAGE_SAVE_FITS',
    'NIGHT_GRAYSCALE',
    'DAYTIME_GRAYSCALE',
    'TEXT_PROPERTIES__FONT_OUTLINE',
    'FILETRANSFER__CERT_BYPASS',
    'FILETRANSFER__UPLOAD_METADATA',
    'FILETRANSFER__UPLOAD_VIDEO',
    'FILETRANSFER__UPLOAD_KEOGRAM',
    'FILETRANSFER__UPLOAD_STARTRAIL',
    'FILETRANSFER__UPLOAD_ENDOFNIGHT',
    'MQTTPUBLISH__ENABLE',
    'MQTTPUBLISH__TLS',
    'MQTTPUBLISH__CERT_BYPASS',
];

var fields = {};
// Populate fields object
field_names.forEach(item => {
    fields[item] = {
        'input' : $('#' + item),
        'error' : $('#' + item + '-error'),
    };
});

// Checkboxes
checkbox_field_names.forEach(item => {
    fields[item] = {
        'input' : $('#' + item),
        'error' : $('#' + item + '-error'),
    };
});

fields['form_global'] = {
    'input' : failureMessage,
    'error' : failureMessage,
};


$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token() }}");
    }
});



$('#form_config').on('submit', function() {

    // hide all errors
    successMessage.css({'display' : 'none'});
    Object.keys(fields).forEach((key) => {
        fields[key].error.css({'display' : 'none'});
    });


    // Populate fields object
    var json_data = {};
    field_names.forEach(item => {
        json_data[item] = fields[item].input.val();
    });

    // checkboxes
    checkbox_field_names.forEach(item => {
        json_data[item] = fields[item].input.prop('checked');
    });


    $.ajax({
        type: "POST",
        url: "{{ url_for('indi_allsky.ajax_config_view') }}",
        contentType: "application/json",
        data: JSON.stringify(json_data),
        success: function(data){
            successMessage.html(data['success-message']);
            successMessage.css({'display' : 'block'});
            setTimeout(function() {
                successMessage.css({'display' : 'none'});
            }, 5000);
        },
        error: function(data){
            var errors = JSON.parse(data.responseText);
            Object.keys(errors).forEach((key) => {
                fields[key].input.addClass('is-invalid');
                fields[key].error.html(errors[key][0]);
                fields[key].error.css({'display' : 'block'});
            });
        },
    });

});

</script>

{% endblock %}
